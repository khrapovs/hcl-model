image: python:3.7

stages:
  - tests
  - docs

Tests:
    stage: tests
    before_script:
      - export PYTHONPATH=$(pwd)/src
      - pip install pipenv
      - pipenv install --system --deploy --skip-lock
    script:
      - python setup.py test

Docs:
    stage: docs
    before_script:
      - export PYTHONPATH=$(pwd)/src
      - pip install pipenv
      - pipenv install --system --deploy --skip-lock
    script:
      - python setup.py docs
